<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Project
        <small>Project management</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">wiseforge</li>
        <li class="active">Project</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">

    <div class="row">
        <div class="col-xs-12">
            <div class="box-body table-responsive alert alert-success alert-dismissable">
                <i class="fa fa-check"></i>
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
                <b>Alert!</b> Success alert preview. This alert is dismissable.
            </div>
        </div>
    </div>

    <h4 class="page-header">
        <div class="row">
            <div class="col-xs-6">
                Project List
            </div>
            <div class="col-xs-6 text-right">
                <button type="button" class="btn btn-default btn-md" data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/create_project.html">
                    <i class="fa fa-fw fa-plus"></i> New Project</button>
                <button type="button" class="btn btn-default btn-md" data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/set_build_profile.html">
                    <i class="fa fa-fw fa-plus"></i> Create Build Profile</button>
                <button type="button" class="btn btn-default btn-md" data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/create_credential.html">
                    <i class="fa fa-fw fa-plus"></i> Create Credential</button>
            </div>
        </div>
    </h4>

    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <div class="box-body table-responsive">

                    <table id="commonDataTable" class="table table-bordered table-hover display">
                        <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>System</th>
                                <th>Description</th>
                                <th>Default Build Profile</th>
                                <th>Artifact</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Project Name</th>
                                <th>System</th>
                                <th>Description</th>
                                <th>Default Build Profile</th>
                                <th>Artifact</th>
                                <th>Actions</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <!--
                            <tr>
                                <td>a</td>
                                <td>a<td>
                                <td>a</td>
                                <td>a</td>
                                <td>a</td>
                                <td>a</td>
                            </tr>
                        -->
                        </tbody>

                    </table>
                </div><!-- /.box-body -->
            </div><!-- /.box -->
        </div>
    </div>

</section><!-- /.content -->
<button type="button" class="btn btn-primary btn-sm">  
  <span class="glyphicon glyphicon-cog"> </span> Build  
</button>
<script type="text/javascript">
var btnAction = '' +
'   <div class="btn-group">' +
'        <button type="button" class="btn btn-default btn-sm">Action</button>' +
'        <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown">' +
'            <span class="glyphicon glyphicon-cog Green"></span>' +
'            <span class="sr-only">Toggle Dropdown</span>' +
'        </button>' +
'        <ul class="dropdown-menu" role="menu">' +
'            <li><a data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/create_project.html">Edit</a></li>' +
'            <li><a href="#">Change Log</a></li>' +
'            <li class="divider"></li>' +
'            <li><a data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/delete_project.html">Delete</a></li>' +
'        </ul>' +
'    </div>' +
'    <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#commonModal" href="pages/wiseforge/popup/build_executor.html">' +
'      Build <span class="glyphicon glyphicon-chevron-right Green"></span>' +
'    </button>'

// initialize Data Table
$( document ).ready(function() {
    var commonDataTable = $('#commonDataTable').dataTable({
        // Disable sorting on the first column
        "columnDefs" : [
        //first define
        {
            'sortable' : false,
            'target' : 0,
            "data" : function(row, type, val, meta){

            },
            "render": function(data, type, row){
                return data +  '.aaa';
            },
            "targets" : 4
        // second define
        }, {
            "render": function(data, type, row){
                return data +  '.bbb';
            },
            "targets" : 3 
        }, {
            "render": function(data, type, row){
                // systems = data.split(",");
                return "abc";
            },
            "targets" : 1
        }],

        //remove Search Label Text
        "oLanguage": { "sSearch": "" },

        // lengthChange: false,
        processing: true,
        serverSide: true,
        ajax: $.fn.dataTable.pipeline( {
            url: "data/wiseforge/project.json",
            pages: 5 // number of pages to cache
        }),
        
        columns: [
            {
                "data": "name"
                ,"orderable": true
            },{
                "data": "systems"
                ,"orderable": false
            },{
                "data": "description"
                ,"orderable": false
            },{
                "data": "default_build_profile"
                ,"orderable": false
            },{
                "data": "package"

                ,"orderable": false
            },{
                "data": null
                ,"defaultContent": btnAction
                ,"orderable": false
            }
        ]
        ,"order": [[2, 'desc']]
    }); //table
    
    $(".dataTables_filter input[type=search]").attr("placeholder", "Search");
    $(".dataTables_filter input[type=search]").parent().addClass("right-inner-addon");
    $(".dataTables_filter input[type=search]").parent().prepend('<i class="glyphicon glyphicon-search"></i>');

});

// column filter
function xxx(){
    $("#commonDataTable tfoot th").each( function ( i ) {
        var select = $('<select><option value=""></option></select>')
            .appendTo( $(this).empty() )
            .on( 'change', function () {
                var val = $(this).val();
 
                table.column( i )
                    .search( val ? '^'+$(this).val()+'$' : val, true, false )
                    .draw();
            });
 
        commonDataTable.column( i ).data().unique().sort().each( function ( d, j ) {
            select.append( '<option value="'+d+'">'+d+'</option>' )
        });
    });
}
</script>

